extends Node



func _init():
	for i in partmaterials:
		for k in partmaterials[i]:
			materiallist[k].parts[i] = partmaterials[i][k].duplicate()



var stats = {
	damage = tr('DAMAGE'),
	damagemod = tr('DAMAGEMOD'),
	armor = tr('ARMOR'),
	evasion = tr('EVASION'),
	hitrate = tr('HITRATE'),
	hpmod = tr("HEALTHPERCENT"),
	manamod = tr("MANAPERCENT"),
	critchance = tr("CRITCHANCE"),
	critmod = tr("CRITMOD"),
	hpmax = tr("HEALTH"),
	speed = tr("SPEED"),
	armorpenetration = tr("ARMORPENETRATION"),
	durability = tr("DURABILITY"),
	durabilitymod = tr("DURABILITYMOD"),
	resistfire = tr('RESISTFIRE'),
	resistwater = tr('RESISTWATER'),
	resistearth = tr('RESISTEARTH'),
	resistair = tr('RESISTAIR'),
	mdef = tr("MDEF"),
	
}



func applyeffect(effect, caster, target):
	
	var value = effect.value
	
	if effect.has('casterreq'):
		if globals.evaluate(effect.casterreq) == false:
			return
	if effect.has('targetreq'):
		if globals.evaluate(effect.targetreq) == false:
			return
	
	

var Parts = {
	ToolHandle = {name = tr("TOOLHANDLE"), code = 'ToolHandle', icon = null},
	Blade = {name = tr("BLADE"), code = 'Blade', icon = load("res://assets/images/gui/universal/msworkers1.png")},
	Blunt = {name = tr("BLUNT"), code = 'Blunt', icon = null},
	Rod = {name = tr("ROD"), code = 'Rod', icon = null},
	BowBase = {name = tr("BOWBASE"), code = 'BowBase', icon = null},
	BowTrim = {name = tr("BOWTRIM"), code = 'BowTrim', icon = null},
	ArmorBase = {name = tr("ARMORBASE"), code = 'ArmorBase', icon = null},
	ArmorTrim = {name = tr("ARMORTRIM"), code = 'ArmorTrim', icon = null},
	ArmorCloth = {name = tr("ARMORCLOTH"), code = 'ArmorCloth', icon = null},
	JewelryGem = {name = tr("JEWELRYGEM"), code = 'JewelryGem', icon = null},
}


var partmaterials = {
	ToolHandle = {
		wood = {hitrate = 5},
		woodmagic = {hitrate = 10},
		iron = {effects = ['gobmetalhandle']},
		steel = {effects = ['elfmetalhandle']},
		bone = {hpmod = 0.05},
	},
	Blade = {
		wood = {damagemod = -0.5},
		woodmagic = {damagemod = -0.4},
		iron = {damage = 3, effects = ['gobmetalblade']},
		steel = {damagemod = 0.3, effects = ['elfmetalblade']},
		bone = {damagemod = -0.1},
	},
	Blunt = {
		wood = {damagemod = -0.2},
		woodmagic = {damagemod = 0.1},
		iron = {damage = 2, armorpenetration = 10},
		steel = {damagemod = 0.3, effects = ['elfmetalblunt']},
		bone = {damagemod = -0.1},
	},
	BowBase = {
		wood = {},
		woodmagic = {damagemod = 0.3, effects = ['elfmetalhandle']},
		bone = {damagemod = 0.1, effects = ['bonebow']},
		iron = {damagemod = 0.1, effects = ['gobmetalblade']},
		steel = {damagemod = 0.2, effects = ['elfmetalblade']},
	},
	Rod = {
		wood = {},
		woodmagic = {damagemod = 0.2, effects = ['elfwoodrod']},
		bone = {effects = ['bonerod']},
		iron = {effects = ['gobmetalrod']},
		steel = {damagemod = 0.1, speed = 10},
	},
	ArmorBase = {
		leather = {evasion = 20},
		bone = {armor = 10, evasion = 10},
		cloth = {evasion = 5, mdef = 10},
		iron = {armor = 20, resistfire = 20},
		steel = {armor = 25, mdef = 10},
		
	},
	ArmorTrim = {
		wood = {hpmod = 0.1},
		woodmagic = {hpmod = 0.1, manamod = 0.1},
		bone = {mdef = 3},
		cloth = {manamod = 0.1},
		iron = {hpmod = 0.15, resistearth = 15},
		steel = {mdef = 10, manamod = 0.1},
		
	},
}

var materiallist = {
	meat = {
		code = 'meat',
		name = '',
		descript = '',
		icon = null,
		price = 3,
		type = 'food',
		tags = [],
	},
	fish = {
		code = 'fish',
		name = '',
		descript = '',
		icon = null,
		price = 3,
		type = 'food',
		tags = [],
	},
	grains = {
		code = 'grains',
		name = '',
		descript = '',
		icon = null,
		price = 2,
		type = 'food',
		tags = [],
	},
	vegetables = {
		code = 'vegetables',
		name = '',
		descript = '',
		icon = null,
		price = 2,
		type = 'food',
		tags = [],
	},
	stone = {
		code = 'stone',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 5,
		type = 'stone',
		tags = [],
	},
	obsidian = {
		code = 'obsidian',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 20,
		type = 'stone',
		tags = [],
	},
	wood = {
		code = 'wood',
		name = '',
		descript = '',
		adjective = '',
		icon = load("res://assets/images/iconsitems/Wood.png"),
		price = 10,
		type = 'wood',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	woodmagic = {
		code = 'woodmagic',
		name = '',
		descript = '',
		adjective = '',
		icon = load("res://assets/images/iconsitems/woodmagic.png"),
		price = 25,
		type = 'wood',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	woodiron = {
		code = 'woodiron',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 25,
		type = 'wood',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	woodancient = {
		code = 'woodancient',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 25,
		type = 'wood',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	leather = {
		code = 'leather',
		name = '',
		descript = '',
		adjective = '',
		icon = load("res://assets/images/iconsitems/Leather.png"),
		price = 10,
		type = 'leather',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	leatherthick = {
		code = 'leatherthick',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 50,
		type = 'leather',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	leathermythic = {
		code = 'leathermythic',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 50,
		type = 'leather',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	leatherdragon = {
		code = 'leatherdragon',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 100,
		type = 'leather',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	bone = {
		code = 'bone',
		name = '',
		descript = '',
		adjective = '',
		icon = load("res://assets/images/iconsitems/Bone.png"),
		price = 10,
		type = 'bone',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	boneancient = {
		code = 'boneancient',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 50,
		type = 'bone',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	bonedragon = {
		code = 'bonedragon',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 100,
		type = 'bone',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	cloth = {
		code = 'cloth',
		name = '',
		descript = '',
		adjective = '',
		icon = load("res://assets/images/iconsitems/Cloth.png"),
		price = 10,
		type = 'cloth',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	clothmagic = {
		code = 'clothmagic',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 25,
		type = 'cloth',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	clothethereal = {
		code = 'clothethereal',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 50,
		type = 'cloth',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	clothdivine = {
		code = 'clothdivine',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 100,
		type = 'cloth',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	iron = {
		code = 'iron',
		name = '',
		descript = '',
		adjective = '',
		icon = load("res://assets/images/iconsitems/DwarvenMetal.png"),
		price = 10,
		type = 'metal',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	steel = {
		code = 'steel',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 25,
		type = 'metal',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	mithril = {
		code = 'mithril',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 75,
		type = 'metal',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	adamantine = {
		code = 'adamantine',
		name = '',
		descript = '',
		adjective = '',
		icon = null,
		price = 100,
		type = 'metal',
		tags = [],
		color = Color8(73,49,28),
		parts = {},
	},
	
	fleawarts = {
		code = 'fleawarts',
		name = '',
		descript = '',
		icon = load("res://assets/images/iconsitems/Bone.png"),
		price = 5,
		type = 'plant',
		tags = [],
	},
	salvia = {
		code = 'salvia',
		name = '',
		descript = '',
		icon = load("res://assets/images/iconsitems/BlueGrass.png"),
		price = 15,
		type = 'plant',
		tags = [],
	},
	
	
#	fairy_dust = {
#
#	},
#	bestial_essence = {
#
#	},
	
}


var itemlist = {
	bed = {#affects energy regen
		code = 'bed',
		name = "",
		descript = "",
		type = 'furniture',
		crafttype = 'basic',
		slots = [],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	
	
	#gear
	
	leather_collar = {#-15% obedience decay
		code = 'leather_collar',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['neck'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	elegant_choker = {#-10% obedience decay, +10% loyalty
		code = 'elegant_chocker',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['neck'],
		price = 250,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	steel_collar = {#-20% obedience decay
		code = 'steel_collar',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['neck'],
		price = 150,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	animal_ears = {#charm+
		code = 'animal_ears',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['head'],
		price = 200,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	tail_plug = {#+15% lust, +charm if used with pet suit
		code = 'tail_plug',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['ass'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	animal_gloves = {#++charm, -physics
		code = 'animal_gloves',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['neck'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	pet_suit = {#+++charm, --physics, -15% obedience decay, takes 3 slots, animal ears, gloves and leather collar
		code = 'pet_suit',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['neck','gloves','head'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	shackles = {#prevents escape if body_factor < 4, physics -25
		code = 'shackles',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['boots'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	chastity_belt = {#prevents all penetrations except for mouth. must have normal lower body
		code = 'chastity_belt',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['crotch'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	stimulative_underwear = {#+30% lust per day, must have normal lower body
		code = 'stimulative_underwear',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['crotch'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	tentacle_suit = {#+50% lust per day 
		code = 'stimulative_underwear',
		name = "",
		descript = "",
		type = 'gear',
		crafttype = 'basic',
		slots = ['crotch','underwear'],
		price = 100,
		icon = null,
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	
	#gear
	axe = {
		name = tr("WEAPONAXENAME"), 
		code = 'axe', 
		description = tr("WEAPONAXEDESCRIPT"),
		icon = load("res://assets/images/iconsgear/AxeBasic.png"),
		price = 0,
		basedurability = 50.0,
		basestats = {damage = 20},
		basemods = {},
		crafttype = 'modular',
		type = 'gear',
		itemtype = 'weapon',
		geartype = 'axe',
		weaponrange = 'melee',
		unlockreqs = [],
		parts = {Blade = 10, ToolHandle = 5},
		partcolororder = {ToolHandle = 1, Blade = 2},
		partmaterialname = "Blade",
		tags = ['tool', 'recipe'],
		repairdifficulty = 'easy',
		slots = ['rhand'],
		hitsound = 'blade',
		effects = ['axe'],
	},
	
	
	#Potions
	
	aphrodisiac = {#maxes out lust, 1 per day
		code = 'aphrodisiac',
		name = "",
		descript = "",
		type = 'usable',
		crafttype = 'basic',
		slots = [],
		price = 100,
		icon = load("res://assets/images/iconsitems/PotionLesser.png"),
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	alcohol = {#recovers fatigue at small health and fear reduction
		code = 'alcohol',
		name = "",
		descript = "",
		type = 'usable',
		crafttype = 'basic',
		slots = [],
		price = 25,
		icon = load("res://assets/images/iconsitems/PotionLesser.png"),
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	tamedrug = {# + 1-2 tame factor, - 1-2 brave factor, -1 wit factor (permanent)
		code = 'tamedrug',
		name = "",
		descript = "",
		type = 'usable',
		crafttype = 'basic',
		slots = [],
		price = 500,
		icon = load("res://assets/images/iconsitems/PotionLesser.png"),
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	ragedrug = {# - 1-2 tame factor, + 1-2 brave factor, +1 body factor (permanent)
		code = 'ragedrug',
		name = "",
		descript = "",
		type = 'usable',
		crafttype = 'basic',
		slots = [],
		price = 500,
		icon = load("res://assets/images/iconsitems/PotionLesser.png"),
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
	sexdrug = {# -1 body factor, -2 wit factor, 3x lust growth, 6 sex factor (permanent)
		code = 'sexdrug',
		name = "",
		descript = "",
		type = 'usable',
		crafttype = 'basic',
		slots = [],
		price = 500,
		icon = load("res://assets/images/iconsitems/PotionLesser.png"),
		unlockreqs = [],
		reqs = [],
		effects = [],
		tags = [],
	},
}

var recipes = {
	aphrodisiac = {
		code = 'aphrodisiac',
		materials = {salvia = 5},
		items = {},
		unlockreqs = [],
		crafttype = 'basic',
		resultamount = 1,
		resultitemtype = 'item', 
		resultitem = 'aphrodisiac', 
		workunits = 75, 
		worktype = 'alchemy'
	},
	alcohol = {
		code = 'alcohol',
		materials = {fleawarts = 5, salvia = 3},
		items = {},
		unlockreqs = [], 
		crafttype = 'basic',
		resultamount = 1, 
		resultitemtype = 'item', 
		resultitem = 'alcohol', 
		workunits = 25,
		worktype = 'alchemy'
	},
	tamedrug = {
		code = 'tamedrug',
		materials = {fleawarts = 5, salvia = 3},
		items = {},
		unlockreqs = [], 
		crafttype = 'basic',
		resultamount = 1, 
		resultitemtype = 'item', 
		resultitem = 'tamedrug', 
		workunits = 250, 
		worktype = 'alchemy'
	},
	ragedrug = {
		code = 'ragedrug',
		materials = {fleawarts = 5, salvia = 3},
		items = {},
		unlockreqs = [], 
		crafttype = 'basic',
		resultamount = 1, 
		resultitemtype = 'item', 
		resultitem = 'ragedrug', 
		workunits = 300, 
		worktype = 'alchemy'
	},
	sexdrug = {
		code = 'sexdrug',
		materials = {fleawarts = 5, salvia = 3},
		items = {},
		unlockreqs = [], 
		crafttype = 'basic',
		resultamount = 1, 
		resultitemtype = 'item', 
		resultitem = 'sexdrug',
		workunits = 300, 
		worktype = 'alchemy'
	},
	petsuit = {
		code = 'petsuit',
		materials = {},
		items = {leather_collar = 1, animal_ears = 1, animal_gloves = 1},
		unlockreqs = [], 
		crafttype = 'basic',
		resultamount = 1, 
		resultitemtype = 'item', 
		resultitem = 'pet_suit',
		workunits = 10, 
		worktype = 'tailor'
	},
	axe = {
		code = 'axe',
		materials = {},
		items = {},
		unlockreqs = [], 
		crafttype = 'modular',
		resultamount = 1, 
		resultitemtype = 'item', 
		resultitem = 'axe',
		workunits = 75, 
		worktype = 'smith'
	},
	
}
